# SPDX-License-Identifier: Apache-2.0

name: "Test Integration Setup"
on:
  workflow_dispatch:
    inputs:
      test-name:
        description: "Test name pattern (regex) to run"
        type: string
        required: false
        default: ""
      vm-os:
        description: 'VM OS to test'
        required: true
        default: 'debian'
        type: choice
        options:
          - debian
          - ubuntu

defaults:
  run:
    shell: bash

permissions:
  contents: read

jobs:
  test-integration:
    name: Test Integration (${{ inputs.vm-os }})
    uses: ./.github/workflows/zxc-integration-test.yaml
    with:
      custom-job-label: "Test Integration (${{ inputs.vm-os }})"
      vm-os: ${{ inputs.vm-os }}
      test-name: ${{ inputs.test-name }}
